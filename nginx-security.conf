# /etc/nginx/conf.d/radarfutebol-security.conf
#
# Maps de segurança para o proxy radarfutebol.xyz
# Deve ficar no contexto http {} (conf.d é incluído automaticamente)

# Detectar bots e scrapers pelo User-Agent
map $http_user_agent $is_scraper_bot {
    default 0;
    "~*HeadlessChrome" 1;
    "~*Headless" 1;
    "~*PhantomJS" 1;
    "~*Selenium" 1;
    "~*python-requests" 1;
    "~*python-urllib" 1;
    "~*curl/" 1;
    "~*wget/" 1;
    "~*Go-http-client" 1;
    "~*masscan" 1;
    "~*nikto" 1;
    "~*sqlmap" 1;
    "~*zgrab" 1;
    "~*scrapy" 1;
    "~*libwww" 1;
    "~*Mozlila" 1;
    "~*NetScope" 1;
}

# Excluir /health e /stats do bot check
map $request_uri $skip_bot_check {
    default 0;
    "~^/health" 1;
    "~^/stats" 1;
}
